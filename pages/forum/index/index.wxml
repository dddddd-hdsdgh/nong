<view class="forum-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="forum-header">
    <view class="header-left">
      <text class="forum-title">ğŸŒ± å†œä¸šè®ºå›</text>
      <text class="forum-subtitle">æ™ºæ…§å†œä¸š Â· ç»¿è‰²æœªæ¥</text>
    </view>
    <view class="post-btn" bindtap="goToPost">
      <text class="plus-icon">âœï¸</text>
      <text>å‘å¸ƒ</text>
    </view>
  </view>
  
  <!-- åˆ†ç±»æ ‡ç­¾ -->
  <view class="forum-tabs">
    <scroll-view class="tabs-scroll" scroll-x>
      <view class="tabs-container">
        <view class="tab-item {{currentTab === 'recommend' ? 'active' : ''}}" bindtap="switchTab" data-tab="recommend">
          <text class="tab-icon">â­</text>
          <text>æ¨è</text>
        </view>
        <view class="tab-item {{currentTab === 'latest' ? 'active' : ''}}" bindtap="switchTab" data-tab="latest">
          <text class="tab-icon">ğŸ”¥</text>
          <text>æœ€æ–°</text>
        </view>
        <view class="tab-item {{currentTab === 'hot' ? 'active' : ''}}" bindtap="switchTab" data-tab="hot">
          <text class="tab-icon">ğŸ“ˆ</text>
          <text>çƒ­é—¨</text>
        </view>
        <view class="tab-item" bindtap="switchTab" data-tab="question">
          <text class="tab-icon">â“</text>
          <text>é—®ç­”</text>
        </view>
        <view class="tab-item" bindtap="switchTab" data-tab="experience">
          <text class="tab-icon">ğŸ’¡</text>
          <text>ç»éªŒ</text>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- å¸–å­åˆ—è¡¨ -->
  <scroll-view class="forum-list" scroll-y="true" enable-back-to-top="true">
    <block wx:for="{{forumList}}" wx:key="id">
      <view class="post-card" bindtap="goToDetail" data-id="{{item.id}}">
        <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
        <view class="post-header">
          <view class="avatar-wrapper">
            <image class="avatar" src="{{item.avatar || '/static/icons/default-avatar.png'}}" mode="aspectFill"></image>
            <view class="online-status" wx:if="{{item.isOnline}}"></view>
          </view>
          <view class="user-info">
            <view class="username-row">
              <text class="username">{{item.username}}</text>
              <view class="user-level" wx:if="{{item.level}}">Lv.{{item.level}}</view>
            </view>
            <view class="post-meta">
              <text class="post-time">{{item.time}}</text>
              <text class="location" wx:if="{{item.location}}">ğŸ“ {{item.location}}</text>
            </view>
          </view>
          <view class="follow-btn" wx:if="{{!item.isFollowed}}" bindtap="followUser" data-id="{{item.id}}">å…³æ³¨</view>
        </view>
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <view class="post-content">
          <view class="post-title-row">
            <text class="post-title">{{item.title}}</text>
            <view class="hot-badge" wx:if="{{item.isHot}}">ğŸ”¥ çƒ­é—¨</view>
          </view>
          <text class="post-text">{{item.content}}</text>
          
          <!-- å›¾ç‰‡å±•ç¤º -->
          <view class="post-images" wx:if="{{item.images && item.images.length > 0}}">
            <view class="image-wrapper {{item.images.length === 1 ? 'single-image' : ''}}" wx:for="{{item.images}}" wx:key="*this" wx:for-item="img" wx:for-index="imgIndex">
              <image src="{{img}}" mode="aspectFill" class="post-img" bindtap="previewImage" data-url="{{img}}"></image>
              <view class="image-count" wx:if="{{imgIndex === 0 && item.images.length > 3}}">
                +{{item.images.length - 3}}
              </view>
            </view>
          </view>
        </view>
        
        <!-- åº•éƒ¨æ“ä½œæ  -->
        <view class="post-footer">
          <view class="post-tags">
            <view class="post-tag">{{item.category}}</view>
            <view class="post-tag secondary" wx:if="{{item.subCategory}}">{{item.subCategory}}</view>
          </view>
          <view class="post-actions">
            <view class="action-item" bindtap="toggleLike" data-id="{{item.id}}">
              <text class="action-icon {{item.isLiked ? 'liked' : ''}}">â¤ï¸</text>
              <text class="action-text">{{item.likes}}</text>
            </view>
            <view class="action-item" bindtap="goToDetail" data-id="{{item.id}}">
              <text class="action-icon">ğŸ’¬</text>
              <text class="action-text">{{item.comments}}</text>
            </view>
            <view class="action-item" bindtap="share" data-id="{{item.id}}">
              <text class="action-icon">ğŸ”—</text>
              <text class="action-text">åˆ†äº«</text>
            </view>
          </view>
        </view>
      </view>
    </block>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{forumList.length === 0}}">
      <text class="empty-icon">ğŸŒ¾</text>
      <text class="empty-text">æš‚æ— ç›¸å…³å¸–å­</text>
      <text class="empty-subtitle">æˆä¸ºç¬¬ä¸€ä¸ªåˆ†äº«å†œä¸šç»éªŒçš„äººå§ï¼</text>
    </view>
    
    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" bindtap="loadMore" wx:if="{{hasMore}}">
      <view class="loading-spinner"></view>
      <text>åŠ è½½æ›´å¤šç²¾å½©å†…å®¹...</text>
    </view>
  </scroll-view>
</view>