<view class="detail-container">
  <view class="post-detail">
    <view class="post-header">
      <image class="avatar" src="{{post.avatar || '/static/icons/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-info">
        <text class="username">{{post.username}}</text>
        <text class="post-time">{{post.time}}</text>
      </view>
      <button class="follow-btn" wx:if="{{!post.isFollowed}}" bindtap="followUser">关注</button>
      <button class="followed-btn" wx:else disabled>已关注</button>
    </view>
    
    <view class="post-content">
      <text class="post-title">{{post.title}}</text>
      <text class="post-text">{{post.content}}</text>
      <view class="post-images" wx:if="{{post.images && post.images.length > 0}}">
        <image wx:for="{{post.images}}" wx:key="*this" wx:for-item="img" src="{{img}}" mode="aspectFill" class="post-img" bindtap="previewImage" data-url="{{img}}"></image>
      </view>
    </view>
    
    <view class="post-footer">
      <view class="post-tag">{{post.category}}</view>
      <view class="post-stats">
        <view class="stat-item">
          <image src="/static/icons/view.png" class="stat-icon"></image>
          <text class="stat-text">{{post.views}} 浏览</text>
        </view>
      </view>
    </view>
    
    <view class="post-actions">
      <view class="action-item {{post.isLiked ? 'active' : ''}}" bindtap="likePost">
        <image src="{{post.isLiked ? '/static/icons/like-active.png' : '/static/icons/like.png'}}" class="action-icon"></image>
        <text class="action-text">{{post.isLiked ? '已赞' : '点赞'}}</text>
        <text class="action-count">{{post.likes}}</text>
      </view>
      <view class="action-item" bindtap="collectPost">
        <image src="{{post.isCollected ? '/static/icons/collect-active.png' : '/static/icons/collect.png'}}" class="action-icon"></image>
        <text class="action-text">{{post.isCollected ? '已收藏' : '收藏'}}</text>
      </view>
      <view class="action-item" bindtap="sharePost">
        <image src="/static/icons/share.png" class="action-icon"></image>
        <text class="action-text">分享</text>
      </view>
    </view>
  </view>
  
  <view class="comment-section">
    <view class="comment-header">
      <text class="comment-title">评论 ({{comments.length}})</text>
    </view>
    
    <view class="comment-list">
      <block wx:for="{{comments}}" wx:key="id">
        <view class="comment-item">
          <image class="comment-avatar" src="{{item.avatar || '/static/icons/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="comment-content">
            <view class="comment-info">
              <text class="comment-username">{{item.username}}</text>
              <text class="comment-time">{{item.time}}</text>
            </view>
            <text class="comment-text">{{item.content}}</text>
            <view class="comment-actions">
              <view class="comment-action {{item.isLiked ? 'active' : ''}}" bindtap="likeComment" data-id="{{item.id}}">
                <image src="{{item.isLiked ? '/static/icons/like-active.png' : '/static/icons/like.png'}}" class="comment-action-icon"></image>
                <text class="comment-action-text">{{item.likes}}</text>
              </view>
              <view class="comment-action" bindtap="replyComment" data-id="{{item.id}}" data-username="{{item.username}}">
                <text class="comment-action-text">回复</text>
              </view>
            </view>
          </view>
        </view>
      </block>
      
      <view class="no-comments" wx:if="{{comments.length === 0}}">
        <text>暂无评论，快来发表第一条评论吧</text>
      </view>
    </view>
    
    <view class="load-more" bindtap="loadMoreComments" wx:if="{{hasMoreComments}}">
      <text>加载更多评论</text>
    </view>
  </view>
  
  <view class="comment-input-area">
    <input class="comment-input" placeholder="说点什么..." value="{{commentInput}}" bindinput="onCommentInput" bindconfirm="sendComment" focus="{{inputFocus}}" />
    <button class="send-btn" bindtap="sendComment" disabled="{{!commentInput.trim()}}">{{inputFocus ? '发送' : '评论'}}</button>
  </view>
</view>