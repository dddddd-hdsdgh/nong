<!--知识库页面模板-->
<view class="knowledge-container">
  
  <!-- 页面头部 -->
  <view class="header">
    <view class="title-section">
      <text class="page-title">农科知识库</text>
      <text class="page-subtitle">专业农业知识分享平台</text>
    </view>
    
    <!-- 搜索框 -->
    <view class="search-section" bindtap="onSearchTap">
      <image class="search-icon" src="/static/icons/view.png"></image>
      <text class="search-placeholder">搜索知识、问题或关键词...</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <block wx:if="{{loading}}">
    <view class="loading-section">
      <view class="loading-content">
        <view class="loading-spinner"></view>
        <text class="loading-text">正在加载知识库...</text>
      </view>
    </view>
  </block>

  <!-- 错误状态 -->
  <block wx:elif="{{error}}">
    <view class="error-section">
      <view class="error-content">
        <image class="error-icon" src="/static/icons/error.png"></image>
        <text class="error-text">{{error}}</text>
        <button class="retry-btn" bindtap="loadData">重新加载</button>
      </view>
    </view>
  </block>

  <!-- 主要内容 -->
  <block wx:else>
    <view class="content">
      
      <!-- 知识分类 -->
      <view class="category-section">
        <view class="section-header">
          <text class="section-title">知识分类</text>
          <text class="section-subtitle">点击查看详细分类</text>
        </view>
        
        <view class="category-grid">
        <view 
          class="category-item" 
          wx:for="{{categories}}" 
          wx:key="id"
          bindtap="navigateToCategory"
          data-id="{{item.id}}"
          data-name="{{item.name}}"
        >
          <view class="category-icon-container">
            <image class="category-icon" src="{{item.icon}}"></image>
          </view>
          <text class="category-name">{{item.name}}</text>
          <text class="category-count">{{item.count}}篇</text>
        </view>
      </view>
      </view>

      <!-- 热门知识 -->
      <view class="hot-knowledge-section">
        <view class="section-header">
          <text class="section-title">热门知识</text>
          <text class="section-subtitle">精选推荐内容</text>
        </view>
        
        <view class="knowledge-list">
        <view 
          class="knowledge-item" 
          wx:for="{{hotKnowledge}}" 
          wx:key="id"
          bindtap="navigateToDetail"
          data-id="{{item.id}}"
        >
          <view class="knowledge-content">
            <text class="knowledge-title">{{item.title}}</text>
            <view class="knowledge-meta">
              <text class="knowledge-category">{{item.category}}</text>
              <view class="knowledge-stats">
                <view class="stat-item">
                  <image class="stat-icon" src="/static/icons/view.png"></image>
                  <text class="stat-text">{{item.viewCount}}</text>
                </view>
                <view class="stat-item">
                  <image class="stat-icon" src="/static/icons/like.png"></image>
                  <text class="stat-text">{{item.likeCount}}</text>
                </view>
              </view>
            </view>
            <!-- 知识摘要 -->
            <text class="knowledge-summary" wx:if="{{item.summary}}">{{item.summary}}</text>
          </view>
          
          <!-- 收藏按钮 -->
          <view class="collect-btn" bindtap="onCollectTap" data-id="{{item.id}}">
            <image 
              class="collect-icon" 
              src="{{item.isFavorite ? '/static/icons/collect-active.png' : '/static/icons/collect.png'}}"
            ></image>
          </view>
        </view>
      </view>
      </view>

      <!-- 底部提示 -->
      <view class="footer-tip">
        <text class="tip-text">更多知识内容持续更新中...</text>
      </view>

    </view>
  </block>
</view>